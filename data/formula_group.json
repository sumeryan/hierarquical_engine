[
    {
        "name": "0196c31f-2847-7a70-999a-66b6b8510709",
        "owner": "Administrator",
        "creation": "2025-05-12 03:12:01.222116",
        "modified": "2025-06-09 18:21:42.020746",
        "modified_by": "Administrator",
        "docstatus": 0,
        "idx": 4,
        "grupo": "Global Nova",
        "doctype": "Formula Group",
        "tableformulas": [
            {
                "name": "0196c5f1-c47d-7831-9e91-f0a43f32f827",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 1,
                "formulafield": "Boletim de Medição▶︎Desconto do REIDI [C] = -3,65% . [B]",
                "modulo": "Boletim de Medição",
                "formula": "sap_medicao = sum(contratos.bol_de_medicao.ped_sap.medicao_atual, sap_order.chave_do_registro == contratos.bol_de_medicao.ped_sap.pedido_sap and sap_order.investimento_operacao == \"Capex\")\n\nreturn (contratos.percentual_reidi/100) * sap_medicao",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "descontoreidi",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01971703-c4a5-7590-888b-f73b4c95ef9c",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 2,
                "formulafield": "Boletim de Medição▶︎Caução Contratual [G] =  5% . [F]",
                "modulo": "Boletim de Medição",
                "formula": "caucao_atual =  (contratos.percentual/100) * last(contratos.bol_de_medicao.medicao_equivalente_liquida_do_reidi_f_a_e)\n\nacumulado_caucao = sum(contratos.bol_de_medicao.caucao_contratual_g_5_f, contratos.bol_de_medicao.medicao_vigente == 'Não')+caucao_atual\n\nporcentagem_total = 0.03 * contratos.bol_de_medicao.valor_do_contrato\nvalor_caucao = 0\nif acumulado_caucao <= porcentagem_total:\n    valor_caucao = caucao_atual\n    \nvalor_caucao",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "caucaocontratual",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01971d35-4e53-7182-80b9-5a8dafac0ebd",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 3,
                "formulafield": "Boletim de Medição Itens▶︎Saldo atual",
                "modulo": "Boletim de Medição Itens",
                "formula": "contratos.bol_de_medicao.itens.valor_total_vigente - contratos.bol_de_medicao.itens.valor_total_acumulado",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "saldoatual",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01972195-1581-7da3-81f4-d16483937910",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 4,
                "formulafield": "Boletim de Medição Itens▶︎Valor total acumulado",
                "modulo": "Boletim de Medição Itens",
                "formula": "contratos.bol_de_medicao.itens.quantidade_total_vigente + contratos.bol_de_medicao.itens.quantidade_acumulada_anterior",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "valortotalacumulado",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0197219b-b1f5-71b0-a5a1-2392dbc258bc",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 5,
                "formulafield": "Boletim de Medição Itens▶︎Valor total medido",
                "modulo": "Boletim de Medição Itens",
                "formula": "funcoes_valor = sum(contratos.registros_de_bm.funcoes.valor_calculado, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n    \nativos_valor = sum(contratos.registros_de_bm.ativos.valor_calculado, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n    \nrecursos_valor = sum(contratos.registros_de_bm.recursos.valor_calculado, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n\nrecursos_valor + ativos_valor + funcoes_valor",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "valortotalmedido",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01972282-351f-7ec2-b110-c762e87748e3",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 6,
                "formulafield": "Boletim de Medição▶︎Medição equivalente líquida do REIDI [F] = [A]+(E)",
                "modulo": "Boletim de Medição",
                "formula": "contratos.bol_de_medicao.medicao_atual_com_desconto_de_ftd_b - contratos.bol_de_medicao.desconto_do_reidi_c_3_65_b",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoequivalente",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01972299-dcbd-7830-b614-bb19d8ee0410",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 7,
                "formulafield": "Boletim de Medição Itens▶︎Quantidade medida",
                "modulo": "Boletim de Medição Itens",
                "formula": "funcoes_valor = sum(contratos.registros_de_bm.funcoes.quantidade_medida, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n    \nativos_valor = sum(contratos.registros_de_bm.ativos.quantidade_medida, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n\nrecursos_valor = sum(contratos.registros_de_bm.recursos.quantidade, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n\nrecursos_valor + ativos_valor + funcoes_valor",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "quantidademedida",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "0197229f-21c5-7a01-8816-4f72347861d8",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 8,
                "formulafield": "Boletim de Medição Itens▶︎Quantidade acumulada",
                "modulo": "Boletim de Medição Itens",
                "formula": "contratos.bol_de_medicao.itens.quantidade_acumulada_anterior + contratos.bol_de_medicao.itens.quantidade_medida",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "quantidadeacumulada",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "019722ad-fbda-7c83-a2ed-6254cc5392e6",
                "owner": "Administrator",
                "creation": "2025-05-12 03:12:01.222116",
                "modified": "2025-06-09 18:21:42.020746",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 9,
                "formulafield": "Boletim de Medição Itens▶︎Valor do fator de pagamento",
                "modulo": "Boletim de Medição Itens",
                "formula": "porcentagem = max(contratos.itens.fator_de_pagamento, contratos.itens.chave_do_registro == contratos.bol_de_medicao.itens.item)\n\nvalor_pay = 0\n\nif(porcentagem > 0):\n    valor_unitario = max(contratos.itens.valor_unitario, contratos.itens.chave_do_registro == contratos.bol_de_medicao.itens.item)\n    \n    pay_factor_value = contratos.bol_de_medicao.itens.valor_total_medido * (porcentagem / 100)\n    valor_pay = pay_factor_value\n\nvalor_pay",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "valorfatorpagamento",
                "parent": "0196c31f-2847-7a70-999a-66b6b8510709",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            }
        ],
        "_liked_by": "[]"
    },
    {
        "name": "0196f326-a812-78e1-afe2-d9c1d3921943",
        "owner": "Administrator",
        "creation": "2025-05-21 11:01:59.057020",
        "modified": "2025-05-21 11:11:59.511045",
        "modified_by": "Administrator",
        "docstatus": 0,
        "idx": 0,
        "grupo": "Pavimento",
        "descricao": "Grupo de formulas dedicados aos contratos de Pavimentos",
        "doctype": "Formula Group",
        "tableformulas": [
            {
                "name": "0196f32f-d199-7c30-9b36-e4699dd91622",
                "owner": "Administrator",
                "creation": "2025-05-21 11:01:59.057020",
                "modified": "2025-05-21 11:11:59.511045",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 1,
                "formulafield": "Boletim de Medição▶︎Medição atual (A)",
                "modulo": "Boletim de Medição",
                "formula": "2*2",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoatual",
                "parent": "0196f326-a812-78e1-afe2-d9c1d3921943",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            }
        ]
    },
    {
        "name": "01970def-d0c6-7810-ac8f-5301344ac9bb",
        "owner": "Administrator",
        "creation": "2025-05-26 15:51:49.811615",
        "modified": "2025-05-26 15:51:49.811615",
        "modified_by": "Administrator",
        "docstatus": 0,
        "idx": 0,
        "grupo": "Performace",
        "doctype": "Formula Group",
        "tableformulas": [
            {
                "name": "01970def-d0c8-7401-9486-08384faeefe3",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 1,
                "formulafield": "Boletim de Medição Ped. SAP▶︎Valor total vigente",
                "modulo": "Boletim de Medição Ped. SAP",
                "formula": "contrato.valor_total_do_contrato",
                "groupfielddoctype": "Contract Measurement SAP Order",
                "groupfieldfieldname": "valortotalvigente",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-084d7665ea37",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 2,
                "formulafield": "Boletim de Medição▶︎Faturamento direto (FTD) na fase atual",
                "modulo": "Boletim de Medição",
                "formula": "valor_ativo = sum(contrato.medicao_de_contrato_bm.pedido_sap_de_bm.medicao_atual, contrato.medicao_de_contrato_bm.medicao_vigente = 'Sim')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "faturamentodireto",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-085e59897755",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 3,
                "formulafield": "Boletim de Medição▶︎Valor Total Vigente",
                "modulo": "Boletim de Medição",
                "formula": "sum(contrato.medicao_de_contrato_bm.ftd_de_bm.valor_total_da_nota_fiscal, contrato.medicao_de_contrato_bm.medicao_vigente == 'Não')+contrato.medicao_de_contrato_bm.faturamento_direto_ftd_na_fase_atual",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "ftdacumulado",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-0869ebdc3ad3",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 4,
                "formulafield": "Boletim de Medição▶︎Saldo contratual anterior (R$)",
                "modulo": "Boletim de Medição",
                "formula": "contrato.valor_total_do_contrato - sum(contrato.medicao_de_contrato_bm.medicao_atual_a, contrato.medicao_de_contrato_bm.medicao_vigente == 'Não')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "saldo",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-087187140359",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 5,
                "formulafield": "Boletim de Medição▶︎Medição atual (A)",
                "modulo": "Boletim de Medição",
                "formula": "sum(contrato.medicao_de_contrato_bm.medicao_atual_a, contrato.medicao_de_contrato_bm.medicao_vigente == 'Sim')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoatual",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-0887888cc970",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 6,
                "formulafield": "Boletim de Medição▶︎Medição atual com desconto de FTD (B)",
                "modulo": "Boletim de Medição",
                "formula": "contrato.medicao_de_contrato_bm.medicao_atual_a - contrato.medicao_de_contrato_bm.faturamento_direto_ftd_na_fase_atual",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoatualdescontoftd",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-089773fc8e71",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 7,
                "formulafield": "Boletim de Medição▶︎Valor total vigente com desconto de FTD",
                "modulo": "Boletim de Medição",
                "formula": "contrato.medicao_de_contrato_bm.valor_total_vigente - contrato.medicao_de_contrato_bm.faturamento_direto_ftd_acumulado",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "totalvigentemenosftd",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-08a3e716e2ec",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 8,
                "formulafield": "Boletim de Medição Ped. SAP▶︎Medição acum. anterior",
                "modulo": "Boletim de Medição Ped. SAP",
                "formula": "sum(contrato.medicao_de_contrato_bm.medicao_atual_a)",
                "groupfielddoctype": "Contract Measurement SAP Order",
                "groupfieldfieldname": "acumuladoatual",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-08bd716a607c",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 9,
                "formulafield": "Boletim de Medição▶︎Saldo Contratual (%)",
                "modulo": "Boletim de Medição",
                "formula": "(contrato.medicao_de_contrato_bm.saldo_contratual_r * 100)/ contrato.valor_total_do_contrato",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "saldopercentual",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-08c281fdb715",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 10,
                "formulafield": "Boletim de Medição▶︎Desconto do REIDI [C] = -3,65% . [B]",
                "modulo": "Boletim de Medição",
                "formula": "valor_percentual = (contrato.percentual_reidi * contrato.medicao_de_contrato_bm.medicao_atual_a)/100\nreid_acumulado = sum(contrato.medicao_de_contrato_bm.desconto_do_reidi_c_3_65_b, contrato.medicao_de_contrato_bm.medicao_vigente == 'Não') + valor_percentual\nvalor_maximo = (contrato.valor_total_do_contrato * 3,65)/100\n\nif reid_acumulado > valor_maximo:\n    return contrato.medicao_de_contrato_bm.medicao_atual_a\nelse\n\treturn contrato.medicao_de_contrato_bm.medicao_atual_a - valor_percentual",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "descontoreidi",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01970def-d0c8-7401-9486-08d4f0b1c324",
                "owner": "Administrator",
                "creation": "2025-05-26 15:51:49.811615",
                "modified": "2025-05-26 15:51:49.811615",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 11,
                "formulafield": "Boletim de Medição▶︎Valor total vigente com desconto de FTD",
                "modulo": "Boletim de Medição",
                "formula": "2*2",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "totalvigentemenosftd",
                "parent": "01970def-d0c6-7810-ac8f-5301344ac9bb",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            }
        ]
    },
    {
        "name": "01973d2d-5ce3-70a3-af28-990dd9e96ff0",
        "owner": "Administrator",
        "creation": "2025-06-04 20:01:12.536285",
        "modified": "2025-06-06 16:50:18.187785",
        "modified_by": "Administrator",
        "docstatus": 0,
        "idx": 3,
        "grupo": "Global Teste",
        "doctype": "Formula Group",
        "tableformulas": [
            {
                "name": "01973d2d-e0a8-7582-bf68-5169b4d9438e",
                "owner": "Administrator",
                "creation": "2025-06-04 20:01:12.536285",
                "modified": "2025-06-06 16:50:18.187785",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 1,
                "formulafield": "Boletim de Medição Itens▶︎Valor total medido",
                "modulo": "Boletim de Medição Itens",
                "formula": "funcao = sum(contratos.registros_de_bm.funcoes.valor_total, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\nativo = sum(contratos.registros_de_bm.ativos.valor_total, contratos.registros_de_bm.ativos.item == contratos.bol_de_medicao.itens.item)\nrecurso = sum(contratos.registros_de_bm.recursos.valor_total, contratos.registros_de_bm.recursos.item == contratos.bol_de_medicao.itens.item)\n\nfuncao+ativo+recurso",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "valortotalmedido",
                "parent": "01973d2d-5ce3-70a3-af28-990dd9e96ff0",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            }
        ]
    },
    {
        "name": "01975663-abed-79b2-875e-88071364cfc6",
        "owner": "Administrator",
        "creation": "2025-06-09 17:31:02.116716",
        "modified": "2025-06-09 17:32:20.987267",
        "modified_by": "Administrator",
        "docstatus": 0,
        "idx": 0,
        "grupo": "Global",
        "doctype": "Formula Group",
        "tableformulas": [
            {
                "name": "01975663-abed-79b2-875e-881508c3c077",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 1,
                "formulafield": "Boletim de Medição Ped. SAP▶︎Valor total vigente",
                "modulo": "Boletim de Medição Ped. SAP",
                "formula": "contrato.valor_total_do_contrato",
                "groupfielddoctype": "Contract Measurement SAP Order",
                "groupfieldfieldname": "valortotalvigente",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-882c7547e1ce",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 2,
                "formulafield": "Boletim de Medição▶︎Faturamento direto (FTD) na fase atual",
                "modulo": "Boletim de Medição",
                "formula": "valor_ativo = sum(contrato.medicao_de_contrato_bm.pedido_sap_de_bm.medicao_atual, contrato.medicao_de_contrato_bm.medicao_vigente = 'Sim')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "faturamentodireto",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-883e4ea5a31f",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 3,
                "formulafield": "Boletim de Medição▶︎Valor Total Vigente",
                "modulo": "Boletim de Medição",
                "formula": "sum(contrato.medicao_de_contrato_bm.ftd_de_bm.valor_total_da_nota_fiscal, contrato.medicao_de_contrato_bm.medicao_vigente == 'Não')+contrato.medicao_de_contrato_bm.faturamento_direto_ftd_na_fase_atual",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "ftdacumulado",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-884586f30db8",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 4,
                "formulafield": "Boletim de Medição▶︎Saldo contratual anterior (R$)",
                "modulo": "Boletim de Medição",
                "formula": "contrato.valor_total_do_contrato - sum(contrato.medicao_de_contrato_bm.medicao_atual_a, contrato.medicao_de_contrato_bm.medicao_vigente == 'Não')",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "saldo",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-88526a49d09b",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 5,
                "formulafield": "Boletim de Medição▶︎Medição atual (A)",
                "modulo": "Boletim de Medição",
                "formula": "last(contrato.medicao_de_contrato_bm.pedido_sap_de_bm.medicao_atual)",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoatual",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-886e236971c4",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 6,
                "formulafield": "Boletim de Medição▶︎Medição atual com desconto de FTD (B)",
                "modulo": "Boletim de Medição",
                "formula": "contrato.medicao_de_contrato_bm.medicao_atual_a - contrato.medicao_de_contrato_bm.faturamento_direto_ftd_na_fase_atual",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoatualdescontoftd",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-887a72af04a1",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 7,
                "formulafield": "Boletim de Medição▶︎Valor total vigente com desconto de FTD",
                "modulo": "Boletim de Medição",
                "formula": "contrato.medicao_de_contrato_bm.valor_total_vigente - contrato.medicao_de_contrato_bm.faturamento_direto_ftd_acumulado",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "totalvigentemenosftd",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-888092094c7f",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 8,
                "formulafield": "Boletim de Medição Ped. SAP▶︎Medição acum. anterior",
                "modulo": "Boletim de Medição Ped. SAP",
                "formula": "sum(contrato.medicao_de_contrato_bm.medicao_atual_a)",
                "groupfielddoctype": "Contract Measurement SAP Order",
                "groupfieldfieldname": "acumuladoatual",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-8896fa7b8076",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 9,
                "formulafield": "Boletim de Medição▶︎Saldo Contratual (%)",
                "modulo": "Boletim de Medição",
                "formula": "(contrato.medicao_de_contrato_bm.saldo_contratual_r * 100)/ contrato.valor_total_do_contrato",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "saldopercentual",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abed-79b2-875e-88a5f51fd282",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 10,
                "formulafield": "Boletim de Medição▶︎Desconto do REIDI [C] = -3,65% . [B]",
                "modulo": "Boletim de Medição",
                "formula": "sap_medicao = sum(contratos.bol_de_medicao.ped_sap.medicao_atual, contratos.bol_de_medicao.ped_sap.pedido_sap == sap_order.chave_do_registro and sap_order.investimento_operacao == \"Capex\")\n\nreturn (contratos.percentual_reidi/100) * sap_medicao",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "descontoreidi",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abee-79d3-ad3f-217533ec57aa",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 11,
                "formulafield": "Boletim de Medição▶︎Caução Contratual [G] =  5% . [F]",
                "modulo": "Boletim de Medição",
                "formula": "caucao_atual =  (contratos.percentual/100) * last(contratos.bol_de_medicao.medicao_equivalente_liquida_do_reidi_f_a_e)\n\nacumulado_caucao = sum(contratos.bol_de_medicao.caucao_contratual_g_5_f, contratos.bol_de_medicao.medicao_vigente == 'Não')+caucao_atual\n\nporcentagem_total = 0.03 * contratos.bol_de_medicao.valor_do_contrato\n\nif acumulado_caucao > porcentagem_total:\n    return 0\nelse:\n    return caucao_atual",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "caucaocontratual",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abee-79d3-ad3f-218d0df959d7",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 12,
                "formulafield": "Boletim de Medição Itens▶︎Saldo atual",
                "modulo": "Boletim de Medição Itens",
                "formula": "contratos.bol_de_medicao.itens.valor_total_vigente - contratos.bol_de_medicao.itens.valor_total_acumulado",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "saldoatual",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abee-79d3-ad3f-2194ee4c8948",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 13,
                "formulafield": "Boletim de Medição Itens▶︎Valor total acumulado",
                "modulo": "Boletim de Medição Itens",
                "formula": "contratos.bol_de_medicao.itens.quantidade_total_vigente + contratos.bol_de_medicao.itens.quantidade_acumulada_anterior",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "valortotalacumulado",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abee-79d3-ad3f-21a892e589ac",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 14,
                "formulafield": "Boletim de Medição Itens▶︎Valor total medido",
                "modulo": "Boletim de Medição Itens",
                "formula": "valor_retorno = 0\n\nfuncoes_valor = sum(contratos.registros_de_bm.funcoes.valor_calculado, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n\nif funcoes_valor:\n    valor_retorno += valor_retorno\n    \nativos_valor = sum(contratos.registros_de_bm.ativos.valor_calculado, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n\nif ativos_valor:\n    valor_retorno += ativos_valor\n    \nrecursos_valor = sum(contratos.registros_de_bm.recursos.valor_calculado, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n\nif recursos_valor:\n    valor_retorno += recursos_valor\n    \nreturn valor_retorno\n\n",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "valortotalmedido",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abee-79d3-ad3f-21b76330a164",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 15,
                "formulafield": "Boletim de Medição▶︎Medição equivalente líquida do REIDI [F] = [A]+(E)",
                "modulo": "Boletim de Medição",
                "formula": "contratos.bol_de_medicao.medicao_atual_com_desconto_de_ftd_b - contratos.bol_de_medicao.desconto_do_reidi_c_3_65_b",
                "groupfielddoctype": "Contract Measurement",
                "groupfieldfieldname": "medicaoequivalente",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abee-79d3-ad3f-21ccf08b5650",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 16,
                "formulafield": "Boletim de Medição Itens▶︎Quantidade medida",
                "modulo": "Boletim de Medição Itens",
                "formula": "sum(contratos.registros_de_bm.funcoes.quantidade_medida, contratos.bol_de_medicao.itens.item == contratos.registros_de_bm.funcoes.item)\n",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "quantidademedida",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abee-79d3-ad3f-21d98f04cb63",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 17,
                "formulafield": "Boletim de Medição Itens▶︎Quantidade acumulada",
                "modulo": "Boletim de Medição Itens",
                "formula": "contratos.bol_de_medicao.medicao_acumulada_anterior + contratos.bol_de_medicao.ped_sap.medicao_acum_atual",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "quantidadeacumulada",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            },
            {
                "name": "01975663-abee-79d3-ad3f-21e4744a0602",
                "owner": "Administrator",
                "creation": "2025-06-09 17:31:02.116716",
                "modified": "2025-06-09 17:32:20.987267",
                "modified_by": "Administrator",
                "docstatus": 0,
                "idx": 18,
                "formulafield": "Boletim de Medição Itens▶︎Valor do fator de pagamento",
                "modulo": "Boletim de Medição Itens",
                "formula": "porcentagem = max(contratos.itens.fator_de_pagamento, contratos.itens.chave_do_registro == contratos.bol_de_medicao.itens.item)\n\n\nif(porcentagem > 0):\n    valor_unitario = max(contratos.itens.valor_unitario, contratos.itens.chave_do_registro == contratos.bol_de_medicao.itens.item)\n\n    valor_da_soma = sum(contratos.registros_de_bm.funcoes.quantidade_medida * valor_unitario, contratos.registros_de_bm.funcoes.item == contratos.bol_de_medicao.itens.item)\n    \n    pay_factor_value = valor_da_soma * (porcentagem / 100)\n    return pay_factor_value\nelse:\n    return 0",
                "groupfielddoctype": "Contract Measurement Item",
                "groupfieldfieldname": "valorfatorpagamento",
                "parent": "01975663-abed-79b2-875e-88071364cfc6",
                "parentfield": "tableformulas",
                "parenttype": "Formula Group",
                "doctype": "Formula Group Field"
            }
        ]
    }
]