[
    {
        "path": "e00007v",
        "formulas": [
            {
                "path": "e00015v",
                "value": "caucao_atual =  (e00003v/100) * last(e00014v)\n\nacumulado_caucao = sum(e00015v, e00009v == 'Não')+caucao_atual\n\nporcentagem_total = 0.03 * e00008v\n\nif acumulado_caucao > porcentagem_total:\n    return 0\nelse:\n    return caucao_atual",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "caucaocontratual"
                },
                "parsed": {
                    "aggr": [
                        {
                            "base": "last(e00014v)",
                            "eval": "e00014v",
                            "vars": [
                                "e00014v"
                            ],
                            "global": true,
                            "filter": "",
                            "filter_vars": []
                        },
                        {
                            "base": "sum(e00015v, e00009v == 'Não')",
                            "eval": "sum(e00015v)",
                            "vars": [
                                "e00015v"
                            ],
                            "global": true,
                            "filter": "e00009v == 'Não'",
                            "filter_vars": [
                                "e00009v"
                            ]
                        }
                    ],
                    "vars": [
                        "e00008v",
                        "e00003v"
                    ],
                    "dag_paths": [
                        "e00014v",
                        "e00015v",
                        "e00009v",
                        "e00008v",
                        "e00003v"
                    ]
                }
            },
            {
                "path": "e00014v",
                "value": "e00012v - e00013v",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "medicaoequivalente"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00012v",
                        "e00013v"
                    ],
                    "dag_paths": [
                        "e00012v",
                        "e00013v"
                    ]
                }
            },
            {
                "path": "e00020v",
                "value": "(e00019v * 100)/ e00001v",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "saldopercentual"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00019v",
                        "e00001v"
                    ],
                    "dag_paths": [
                        "e00019v",
                        "e00001v"
                    ]
                }
            },
            {
                "path": "e00018v",
                "value": "e00016v - e00017v",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "totalvigentemenosftd"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00016v",
                        "e00017v"
                    ],
                    "dag_paths": [
                        "e00016v",
                        "e00017v"
                    ]
                }
            },
            {
                "path": "e00013v",
                "value": "(e00002v/100) * e00010v",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "descontoreidi"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00002v",
                        "e00010v"
                    ],
                    "dag_paths": [
                        "e00002v",
                        "e00010v"
                    ]
                }
            },
            {
                "path": "e00012v",
                "value": "e00010v - e00011v",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "medicaoatualdescontoftd"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00011v",
                        "e00010v"
                    ],
                    "dag_paths": [
                        "e00011v",
                        "e00010v"
                    ]
                }
            },
            {
                "path": "e00019v",
                "value": "e00001v - sum(e00010v, e00009v == 'Não')",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "saldo"
                },
                "parsed": {
                    "aggr": [
                        {
                            "base": "sum(e00010v, e00009v == 'Não')",
                            "eval": "sum(e00010v)",
                            "vars": [
                                "e00010v"
                            ],
                            "global": true,
                            "filter": "e00009v == 'Não'",
                            "filter_vars": [
                                "e00009v"
                            ]
                        }
                    ],
                    "vars": [
                        "e00001v"
                    ],
                    "dag_paths": [
                        "e00010v",
                        "e00009v",
                        "e00001v"
                    ]
                }
            },
            {
                "path": "e00017v",
                "value": "sum(e00026v, e00009v == 'Não')+e00011v",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "ftdacumulado"
                },
                "parsed": {
                    "aggr": [
                        {
                            "base": "sum(e00026v, e00009v == 'Não')",
                            "eval": "sum(e00026v)",
                            "vars": [
                                "e00026v"
                            ],
                            "global": true,
                            "filter": "e00009v == 'Não'",
                            "filter_vars": [
                                "e00009v"
                            ]
                        }
                    ],
                    "vars": [
                        "e00011v"
                    ],
                    "dag_paths": [
                        "e00026v",
                        "e00009v",
                        "e00011v"
                    ]
                }
            },
            {
                "path": "e00010v",
                "value": "last(e00023v)",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "medicaoatual"
                },
                "parsed": {
                    "aggr": [
                        {
                            "base": "last(e00023v)",
                            "eval": "e00023v",
                            "vars": [
                                "e00023v"
                            ],
                            "global": true,
                            "filter": "",
                            "filter_vars": []
                        }
                    ],
                    "vars": [],
                    "dag_paths": [
                        "e00023v"
                    ]
                }
            },
            {
                "path": "e00011v",
                "value": "valor_ativo = sum(e00023v, e00009v = 'Sim')",
                "update": {
                    "doctype": "Contract Measurement",
                    "fieldname": "faturamentodireto"
                },
                "parsed": {
                    "aggr": [
                        {
                            "base": "sum(e00023v, e00009v = 'Sim')",
                            "eval": "sum(e00023v)",
                            "vars": [
                                "e00023v"
                            ],
                            "global": true,
                            "filter": "e00009v == 'Sim'",
                            "filter_vars": [
                                "e00009v"
                            ]
                        }
                    ],
                    "vars": [],
                    "dag_paths": [
                        "e00023v",
                        "e00009v"
                    ]
                }
            }
        ],
        "ids": [
            {
                "id": "019727d9-2f15-7bb2-a7a3-c5d25fc47647"
            }
        ]
    },
    {
        "path": "e00021v",
        "formulas": [
            {
                "path": "e00024v",
                "value": "sum(e00010v)",
                "update": {
                    "doctype": "Contract Measurement SAP Order",
                    "fieldname": "acumuladoatual"
                },
                "parsed": {
                    "aggr": [
                        {
                            "base": "sum(e00010v)",
                            "eval": "sum(e00010v)",
                            "vars": [
                                "e00010v"
                            ],
                            "global": true,
                            "filter": "",
                            "filter_vars": []
                        }
                    ],
                    "vars": [],
                    "dag_paths": [
                        "e00010v"
                    ]
                }
            },
            {
                "path": "e00022v",
                "value": "e00001v+100*2+200",
                "update": {
                    "doctype": "Contract Measurement SAP Order",
                    "fieldname": "valortotalvigente"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00001v"
                    ],
                    "dag_paths": [
                        "e00001v"
                    ]
                }
            }
        ],
        "ids": [
            {
                "id": "019727d9-2f15-7bb2-a7a3-c5edc19463f9"
            },
            {
                "id": "019727d9-2f15-7bb2-a7a3-c5f0eeeff71b"
            },
            {
                "id": "019727d9-2f15-7bb2-a7a3-c60176d41e50"
            },
            {
                "id": "019727d9-2f15-7bb2-a7a3-c61e102374ce"
            },
            {
                "id": "019727d9-2f16-78f2-9152-da92f414022a"
            },
            {
                "id": "019727d9-2f16-78f2-9152-daad5ccb291c"
            },
            {
                "id": "019727d9-2f16-78f2-9152-dabd097302c1"
            },
            {
                "id": "019727d9-2f16-78f2-9152-dac3ed83f726"
            },
            {
                "id": "019727d9-2f16-78f2-9152-dadc9ad361fe"
            },
            {
                "id": "019727d9-2f16-78f2-9152-dae8ba06bd98"
            },
            {
                "id": "019727d9-2f16-78f2-9152-daf9c0f20508"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db03c6d820ee"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db1e8f6ca4c2"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db2573160641"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db3c7c9c819b"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db4c693d951d"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db5298c8c56d"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db65683648e9"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db73cd8ae63e"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db8f08cc5a83"
            },
            {
                "id": "019727d9-2f16-78f2-9152-db9573c9a345"
            },
            {
                "id": "019727d9-2f16-78f2-9152-dba37888537a"
            },
            {
                "id": "019727d9-2f16-78f2-9152-dbb154a516d3"
            },
            {
                "id": "019727d9-2f17-7361-8688-1fdb89323c82"
            },
            {
                "id": "019727d9-2f17-7361-8688-1fe99a14a10d"
            },
            {
                "id": "019727d9-2f17-7361-8688-1ff0cc997c3f"
            },
            {
                "id": "019727d9-2f17-7361-8688-200cdcdbee6b"
            },
            {
                "id": "019727d9-2f17-7361-8688-2016728c13b5"
            },
            {
                "id": "019727d9-2f17-7361-8688-2028373aad4e"
            },
            {
                "id": "019727d9-2f17-7361-8688-2034cb2f14ee"
            },
            {
                "id": "019727d9-2f17-7361-8688-20448f01d54c"
            },
            {
                "id": "019727d9-2f17-7361-8688-205ca8f45759"
            },
            {
                "id": "019727d9-2f17-7361-8688-206782e2d221"
            },
            {
                "id": "019727d9-2f17-7361-8688-2073b19b4571"
            },
            {
                "id": "019727d9-2f17-7361-8688-208eb71842c7"
            },
            {
                "id": "019727d9-2f17-7361-8688-20959c143d3c"
            },
            {
                "id": "019727d9-2f17-7361-8688-20ae63d445e5"
            },
            {
                "id": "019727d9-2f17-7361-8688-20bab687055a"
            },
            {
                "id": "019727d9-2f17-7361-8688-20cb7f2e716e"
            },
            {
                "id": "019727d9-2f17-7361-8688-20d1a8ba2068"
            },
            {
                "id": "019727d9-2f17-7361-8688-20eba20bd142"
            },
            {
                "id": "019727d9-2f17-7361-8688-20f04767ab15"
            },
            {
                "id": "019727d9-2f17-7361-8688-210dfd5aff89"
            },
            {
                "id": "019727d9-2f18-7422-a19d-10d950e9a66f"
            },
            {
                "id": "019727d9-2f18-7422-a19d-10eb95b53dd3"
            },
            {
                "id": "019727d9-2f18-7422-a19d-10f33303d90e"
            },
            {
                "id": "019727d9-2f18-7422-a19d-110c575e0c18"
            },
            {
                "id": "019727d9-2f18-7422-a19d-1116f6992e8a"
            },
            {
                "id": "019727d9-2f18-7422-a19d-1124f3bfbce7"
            },
            {
                "id": "019727d9-2f18-7422-a19d-113cbc8b82a4"
            },
            {
                "id": "019727d9-2f18-7422-a19d-1141af7ba959"
            },
            {
                "id": "019727d9-2f18-7422-a19d-11516e78a727"
            },
            {
                "id": "019727d9-2f18-7422-a19d-1166d399226c"
            },
            {
                "id": "019727d9-2f18-7422-a19d-117425a64795"
            },
            {
                "id": "019727d9-2f18-7422-a19d-118822176dad"
            },
            {
                "id": "019727d9-2f18-7422-a19d-1194daa78b83"
            },
            {
                "id": "019727d9-2f18-7422-a19d-11ad795f7c65"
            },
            {
                "id": "019727d9-2f18-7422-a19d-11b9331efdc7"
            },
            {
                "id": "019727d9-2f18-7422-a19d-11caf8065537"
            },
            {
                "id": "019727d9-2f18-7422-a19d-11d93a9c8ddd"
            },
            {
                "id": "019727d9-2f18-7422-a19d-11e263c087e6"
            },
            {
                "id": "019727d9-2f18-7422-a19d-11f9fb7f3a5a"
            },
            {
                "id": "019727d9-2f19-7820-b33a-cd8deabed018"
            },
            {
                "id": "019727d9-2f19-7820-b33a-cd9de3121184"
            },
            {
                "id": "019727d9-2f19-7820-b33a-cda072b0adea"
            },
            {
                "id": "019727d9-2f19-7820-b33a-cdbc7efd71e7"
            },
            {
                "id": "019727d9-2f19-7820-b33a-cdcfa92e0ff4"
            },
            {
                "id": "019727d9-2f19-7820-b33a-cdda876e3e94"
            },
            {
                "id": "019727d9-2f19-7820-b33a-cdef1df5c969"
            },
            {
                "id": "019727d9-2f19-7820-b33a-cdf629a0d63e"
            },
            {
                "id": "019727d9-2f19-7820-b33a-ce010b81ec83"
            },
            {
                "id": "019727d9-2f19-7820-b33a-ce16b2c2da58"
            },
            {
                "id": "019727d9-2f19-7820-b33a-ce2d4353fdff"
            },
            {
                "id": "019727d9-2f19-7820-b33a-ce3c7bd4e6f0"
            },
            {
                "id": "019727d9-2f19-7820-b33a-ce4d74e715ad"
            },
            {
                "id": "019727d9-2f19-7820-b33a-ce5050640761"
            },
            {
                "id": "019727d9-2f19-7820-b33a-ce60551ccc02"
            }
        ]
    },
    {
        "path": "e00027v",
        "formulas": [
            {
                "path": "e00035v",
                "value": "e00034v + e00029v",
                "update": {
                    "doctype": "Contract Measurement Item",
                    "fieldname": "quantidadeacumulada"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00034v",
                        "e00029v"
                    ],
                    "dag_paths": [
                        "e00034v",
                        "e00029v"
                    ]
                }
            },
            {
                "path": "e00036v",
                "value": "e00030v + e00033v",
                "update": {
                    "doctype": "Contract Measurement Item",
                    "fieldname": "valortotalacumulado"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00033v",
                        "e00030v"
                    ],
                    "dag_paths": [
                        "e00033v",
                        "e00030v"
                    ]
                }
            },
            {
                "path": "e00031v",
                "value": "e00030v - e00032v",
                "update": {
                    "doctype": "Contract Measurement Item",
                    "fieldname": "saldoatual"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [
                        "e00032v",
                        "e00030v"
                    ],
                    "dag_paths": [
                        "e00032v",
                        "e00030v"
                    ]
                }
            },
            {
                "path": "e00037v",
                "value": "2*2",
                "update": {
                    "doctype": "Contract Measurement Item",
                    "fieldname": "valorfatorpagamento"
                },
                "parsed": {
                    "aggr": [],
                    "vars": [],
                    "dag_paths": []
                }
            },
            {
                "path": "e00029v",
                "value": "sum(e00041v, e00040v == e00028v)",
                "update": {
                    "doctype": "Contract Measurement Item",
                    "fieldname": "quantidademedida"
                },
                "parsed": {
                    "aggr": [
                        {
                            "base": "sum(e00041v, e00040v == e00028v)",
                            "eval": "sum(e00041v)",
                            "vars": [
                                "e00041v"
                            ],
                            "global": true,
                            "filter": "e00040v == e00028v",
                            "filter_vars": [
                                "e00040v",
                                "e00028v"
                            ]
                        }
                    ],
                    "vars": [],
                    "dag_paths": [
                        "e00041v",
                        "e00040v",
                        "e00028v"
                    ]
                }
            },
            {
                "path": "e00030v",
                "value": "valor_unitario = max(e00006v, e00005v == e00028v)\n\nsum(e00041v * valor_unitario, e00040v == e00028v)",
                "update": {
                    "doctype": "Contract Measurement Item",
                    "fieldname": "valortotalmedido"
                },
                "parsed": {
                    "aggr": [
                        {
                            "base": "max(e00006v, e00005v == e00028v)",
                            "eval": "max(e00006v)",
                            "vars": [
                                "e00006v"
                            ],
                            "global": true,
                            "filter": "e00005v == e00028v",
                            "filter_vars": [
                                "e00005v",
                                "e00028v"
                            ]
                        },
                        {
                            "base": "sum(e00041v * valor_unitario, e00040v == e00028v)",
                            "eval": "sum(e00041v * valor_unitario)",
                            "vars": [
                                "e00041v"
                            ],
                            "global": true,
                            "filter": "e00040v == e00028v",
                            "filter_vars": [
                                "e00040v",
                                "e00028v"
                            ]
                        }
                    ],
                    "vars": [],
                    "dag_paths": [
                        "e00006v",
                        "e00005v",
                        "e00028v",
                        "e00041v",
                        "e00040v"
                    ]
                }
            }
        ],
        "ids": [
            {
                "id": "019727d9-2f1a-7621-914e-3ecfde1ea447"
            },
            {
                "id": "019727d9-2f1a-7621-914e-3ed8a174bf98"
            },
            {
                "id": "019727d9-2f1a-7621-914e-3ee5771ba968"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-46a95a3b3de3"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-46b5de90294e"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-46c4532cee81"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-46d026eab743"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-46e2df5385c9"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-46f642444da3"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-4701d4b392c4"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-471a18d3afdc"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-472782b6106f"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-4734541181a3"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-474fdbd95567"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-475127ad3793"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-476962668358"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-4772f8d34b52"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-47843c1b297c"
            },
            {
                "id": "019727d9-2f1b-74a0-8e16-479b016b2b54"
            }
        ]
    }
]